<%= labelled_tabular_form_for @cost_object,
                              :as => :cost_object,
                              :url => cost_object_path(@cost_object),
                              :html => {:multipart => true,
                                        :id => 'cost_object_form',
                                        :class => nil} do |f| %>
    <%= error_messages_for 'cost_object' %>
    <div class="box">
    <div class="tabular">
      <%= render :partial => 'form', :locals => {:f => f} %>
    </div>
    <fieldset><legend><%= l(:label_attachment_plural )%></legend>
      <p><%= render :partial => 'attachments/form' %></p>
    </fieldset>
    </div>
    <%= submit_tag l(:button_submit) %>
    <%= link_to_remote l(:label_preview), 
                       { :url => { :controller => 'cost_objects', :action => 'preview', :project_id => @project },
                         :method => 'post',
                         :update => 'preview',
                         :with => "Form.serialize('cost_object_form')",
                         :complete => "Element.scrollTo('preview')"
                       }, :accesskey => accesskey(:preview) %>
<% end %>

<div id="preview" class="wiki"></div>
